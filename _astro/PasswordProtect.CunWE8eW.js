import{S as R,i as F,s as G,e as q,a as j,t as P,c as X,b as D,d as S,o as J,g as Q,f as g,h as C,j as x,k as A,l as I,m as y,n as p,p as _,q as B,r as E,u as K,v as W,w as Y,x as Z,y as $,z as ee}from"./index.H2ojFWT0.js";function te(s){let t,e,l,a,n,c,r,o,i,u,h,v,d,f,m,w,$='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="svelte-1rhcfx9"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path></svg>',D="受保护内容",M="此文章需要密码才能访问",k='<a href="/" class="svelte-1rhcfx9">返回首页</a>',H=s[2]&&O();return{c(){t=g("div"),e=g("div"),e.innerHTML=$,l=C(),a=g("h2"),a.textContent=D,n=C(),c=g("p"),c.textContent=M,r=C(),H&&H.c(),o=C(),i=g("div"),u=g("input"),h=C(),v=g("button"),v.textContent="解锁",d=C(),f=g("div"),f.innerHTML=k,this.h()},l(s){t=x(s,"DIV",{class:!0});var p=A(t);e=x(p,"DIV",{class:!0,"data-svelte-h":!0}),"svelte-12jlga8"!==I(e)&&(e.innerHTML=$),l=y(p),a=x(p,"H2",{class:!0,"data-svelte-h":!0}),"svelte-xpcxw9"!==I(a)&&(a.textContent=D),n=y(p),c=x(p,"P",{class:!0,"data-svelte-h":!0}),"svelte-11biptb"!==I(c)&&(c.textContent=M),r=y(p),H&&H.l(p),o=y(p),i=x(p,"DIV",{class:!0});var g=A(i);u=x(g,"INPUT",{type:!0,placeholder:!0,class:!0}),g.forEach(S),h=y(p),v=x(p,"BUTTON",{class:!0,"data-svelte-h":!0}),"svelte-1p9j3cs"!==I(v)&&(v.textContent="解锁"),d=y(p),f=x(p,"DIV",{class:!0,"data-svelte-h":!0}),"svelte-1u9jrli"!==I(f)&&(f.innerHTML=k),p.forEach(S),this.h()},h(){p(e,"class","lock-icon svelte-1rhcfx9"),p(a,"class","title svelte-1rhcfx9"),p(c,"class","subtitle svelte-1rhcfx9"),p(u,"type","password"),p(u,"placeholder","请输入密码"),p(u,"class","svelte-1rhcfx9"),p(i,"class","input-group svelte-1rhcfx9"),p(v,"class","svelte-1rhcfx9"),p(f,"class","back-link svelte-1rhcfx9"),p(t,"class","password-container svelte-1rhcfx9")},m(p,x){j(p,t,x),_(t,e),_(t,l),_(t,a),_(t,n),_(t,c),_(t,r),H&&H.m(t,null),_(t,o),_(t,i),_(i,u),B(u,s[0]),_(t,h),_(t,v),_(t,d),_(t,f),m||(w=[E(u,"input",s[9]),E(u,"keydown",s[4]),E(v,"click",s[3])],m=!0)},p(s,e){s[2]?H||(H=O(),H.c(),H.m(t,o)):H&&(H.d(1),H=null),1&e&&u.value!==s[0]&&B(u,s[0])},i:K,o:K,d(s){s&&S(t),H&&H.d(),m=!1,W(w)}}}function se(s){let t;const e=s[8].default,l=Y(e,s,s[7],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,e){l&&l.m(s,e),t=!0},p(s,a){l&&l.p&&(!t||128&a)&&Z(l,e,s,s[7],t?ee(e,s[7],a,null):$(s[7]),null)},i(s){t||(D(l,s),t=!0)},o(s){P(l,s),t=!1},d(s){l&&l.d(s)}}}function O(s){let t,e="密码错误，请重试";return{c(){t=g("div"),t.textContent=e,this.h()},l(s){t=x(s,"DIV",{class:!0,"data-svelte-h":!0}),"svelte-1rlxbfh"!==I(t)&&(t.textContent=e),this.h()},h(){p(t,"class","error svelte-1rhcfx9")},m(s,e){j(s,t,e)},d(s){s&&S(t)}}}function le(s){let t,e,l,a;const n=[se,te],c=[];function r(s,t){return s[1]?0:1}return t=r(s),e=c[t]=n[t](s),{c(){e.c(),l=q()},l(s){e.l(s),l=q()},m(s,e){c[t].m(s,e),j(s,l,e),a=!0},p(s,[a]){let o=t;t=r(s),t===o?c[t].p(s,a):(Q(),P(c[o],1,1,(()=>{c[o]=null})),X(),e=c[t],e?e.p(s,a):(e=c[t]=n[t](s),e.c()),D(e,1),e.m(l.parentNode,l))},i(s){a||(D(e),a=!0)},o(s){P(e),a=!1},d(s){s&&S(l),c[t].d(s)}}}const ne="post_unlocked_";function M(s){let t=0;for(let e=0;e<s.length;e++){t=(t<<5)-t+s.charCodeAt(e),t|=0}return t.toString(36)}function re(s,t,e){let{$$slots:l={},$$scope:a}=t,{password:n=""}=t,{slug:c=""}=t,r="",o=!1,i=!1;function p(){return ne+M(c)}function u(){r===n?(localStorage.setItem(p(),M(n)),e(1,o=!0),e(2,i=!1)):e(2,i=!0)}return J((()=>{e(1,o=!(typeof window>"u")&&localStorage.getItem(p())===M(n))})),s.$$set=s=>{"password"in s&&e(5,n=s.password),"slug"in s&&e(6,c=s.slug),"$$scope"in s&&e(7,a=s.$$scope)},[r,o,i,u,function(s){"Enter"===s.key&&u()},n,c,a,l,function(){r=this.value,e(0,r)}]}class ce extends R{constructor(s){super(),F(this,s,re,le,G,{password:5,slug:6})}}export{ce as default};